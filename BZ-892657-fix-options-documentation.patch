commit f280fa5848e1b6b77fb16a2b694e0b4167c20fe6
Author: James Antill <james@and.org>
Date:   Tue Apr 16 15:55:59 2013 -0400

    Fix options documentation. BZ 892657.

diff --git a/docs/createrepo.8 b/docs/createrepo.8
index ff359de..eefd4bf 100644
--- a/docs/createrepo.8
+++ b/docs/createrepo.8
@@ -37,6 +37,10 @@ cache of checksums of packages in the repository. In consecutive runs of
 createrepo over the same repository of files that do not have a complete
 change out of all packages this decreases the processing time dramatically.
 .br
+.IP "\fB\--basedir\fP"
+Basedir for path to directories in the repodata, default is the current working
+directory.
+.br
 .IP "\fB\--update\fP"
 If metadata already exists in the outputdir and an rpm is unchanged
 (based on file size and mtime) since the metadata was generated, reuse
@@ -49,6 +53,9 @@ skip the stat() call on a --update, assumes if the filename is the same
 then the file is still the same (only use this if you're fairly trusting or
 gullible).
 .br
+.IP "\fB\--update-md-path\fP"
+Use the existing repodata for --update, from this path.
+.br
 .IP "\fB\-C --checkts\fP"
 Don't generate repo metadata, if their timestamps are newer than its rpms.
 This option decreases the processing time drastically again, if you happen
@@ -62,7 +69,7 @@ directories corresponding to different volumes in a media set.
 .br
 .IP "\fB\-p --pretty\fP"
 Output xml files in pretty format.
-.IP "\fB\-V --version\fP"
+.IP "\fB\--version\fP"
 Output version.
 .IP "\fB\-h --help\fP"
 Show help menu.
@@ -90,6 +97,10 @@ Include the file's checksum in the metadata filename, helps HTTP caching (defaul
 .IP "\fB\--simple-md-filenames\fP"
 Do not include the file's checksum in the metadata filename.
 
+.IP "\fB\--retain-old-md\fP"
+Keep around the latest (by timestamp) N copies of the old repodata (so clients
+with older repomd.xml files can still access it). Default is 0.
+
 .IP "\fB\--distro\fP"
 Specify distro tags. Can be specified more than once. Optional syntax specifying a
 cpeid(http://cpe.mitre.org/) --distro=cpeid,distrotag
diff --git a/genpkgmetadata.py b/genpkgmetadata.py
index 09bcba4..4528bf2 100755
--- a/genpkgmetadata.py
+++ b/genpkgmetadata.py
@@ -22,7 +22,7 @@
 import os
 import sys
 import re
-from optparse import OptionParser
+from optparse import OptionParser,SUPPRESS_HELP
 import time
 
 import createrepo
@@ -132,7 +132,7 @@ def parse_args(args, conf):
         help="number of workers to spawn to read rpms")
     parser.add_option("--xz", default=False,
         action="store_true",
-        help="use xz for repodata compression")
+        help=SUPPRESS_HELP)
     parser.add_option("--compress-type", default='compat', dest="compress_type",
         help="which compression type to use")
         
